<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Attendance Management System</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f6f6f6;
    }

    nav {
      background-color: #A6615A;
      padding: 10px 0;
    }

    .navbar {
      list-style: none;
      display: flex;
      justify-content: center;
      margin: 0;
      padding: 0;
    }

    .navbar li {
      margin: 0 15px;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }

    .navbar a:hover,
    .navbar a.active {
      text-decoration: underline;
    }

    main {
      padding: 20px;
      text-align: center;
    }

    /* Table styling */
    table {
      margin: 20px auto;
      border-collapse: collapse;
      width: 80%;
      background: white;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 10px;
    }

    th {
      background-color: #A6615A;
      color: white;
    }

    /* Form styling */
    .student-form {
      background: white;
      padding: 20px;
      width: 300px;
      margin: 0 auto;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
    }

    .student-form label {
      text-align: left;
      margin-top: 10px;
    }

    .student-form input {
      padding: 8px;
      margin-top: 5px;
    }

    button, .button {
      margin-top: 15px;
      background-color: #A6615A;
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
      border-radius: 5px;
      text-decoration: none;
      display: inline-block;
    }

    button:hover, .button:hover {
      background-color: #8e524c;
    }

    /* Hide all pages except the one shown */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }
  </style>
</head>

<body>
  <nav>
    <ul class="navbar">
      <li><a data-page="home" class="active">Home</a></li>
      <li><a data-page="attendance">Attendance List</a></li>
      <li><a data-page="add-student">Add Student</a></li>
      <li><a data-page="reports">Reports</a></li>
      <li><a data-page="logout">Logout</a></li>
    </ul>
  </nav>

  <!-- HOME -->
  <main id="home" class="page active">
    <h1>Welcome to the Attendance Management System</h1>
    <p>This system allows you to manage students, attendance lists, and reports efficiently.</p>
  </main>

  <!-- ATTENDANCE LIST -->
  <main id="attendance" class="page">
    <h2>Student Attendance Table</h2>
    <table id="attendanceTable">
      <thead>
        <tr>
          <th>Student ID</th>
          <th>Last Name</th>
          <th>First Name</th>
          <th>Course</th>
          <th>Session Date</th>
          <th>Present</th>
          <th>Participated</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <!-- ADD STUDENT -->
  <main id="add-student" class="page">
    <h2>Add New Student</h2>
    <form id="studentForm" class="student-form">
      <label for="id">Student ID:</label>
      <input type="text" id="id" name="id" required>

      <label for="lastname">Last Name:</label>
      <input type="text" id="lastname" name="lastname" required>

      <label for="firstname">First Name:</label>
      <input type="text" id="firstname" name="firstname" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <button type="submit">Submit</button>
    </form>
  </main>

  <!-- REPORTS -->
  <main id="reports" class="page">
    <h2>Reports Section</h2>
    <p>This section will display attendance or student statistics in future updates.</p>
  </main>

  <!-- LOGOUT -->
  <main id="logout" class="page">
    <h2>You have been logged out.</h2>
    <p>Thank you for using the Attendance Management System.</p>
    <a data-page="home" class="button">Return to Home</a>
  </main>

  <script>
    // --- Navigation Logic ---
    const navLinks = document.querySelectorAll('.navbar a');
    const pages = document.querySelectorAll('.page');

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        const targetPage = link.getAttribute('data-page');

        // Switch active page
        pages.forEach(page => {
          page.classList.remove('active');
          if (page.id === targetPage) page.classList.add('active');
        });

        // Switch navbar active link
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');

        // Refresh attendance table if opened
        if (targetPage === "attendance") loadTable();
      });
    });

    // --- Add Student Form ---
    const form = document.getElementById('studentForm');

    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const id = document.getElementById('id').value;
      const lastname = document.getElementById('lastname').value;
      const firstname = document.getElementById('firstname').value;
      const email = document.getElementById('email').value;

      const students = JSON.parse(localStorage.getItem('students')) || [];

      students.push({
        id,
        lastname,
        firstname,
        email,
        course: "AWP",
        date: new Date().toLocaleDateString(),
        present: "Yes",
        participated: "Yes"
      });

      localStorage.setItem('students', JSON.stringify(students));

      alert("âœ… Student added successfully!");
      form.reset();
    });

    // --- Load Attendance Table ---
    function loadTable() {
      const tableBody = document.querySelector('#attendanceTable tbody');
      const students = JSON.parse(localStorage.getItem('students')) || [];

      tableBody.innerHTML = ""; // clear previous rows

      students.forEach(student => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${student.id}</td>
          <td>${student.lastname}</td>
          <td>${student.firstname}</td>
          <td>${student.course}</td>
          <td>${student.date}</td>
          <td>${student.present}</td>
          <td>${student.participated}</td>
        `;
        tableBody.appendChild(row);
      });
    }

    // Load data when site opens (for persistence)
    loadTable();
  </script>
</body>
</html>
