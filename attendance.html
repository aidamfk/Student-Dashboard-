<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Attendance List â€” TP3</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <ul class="navbar">
      <li><a href="index.html">Home</a></li>
      <li><a href="attendance.html" class="active">Attendance List</a></li>
      <li><a href="add_student.html">Add Student</a></li>
      <li><a href="reports.html">Reports</a></li>
      <li><a href="logout.html">Logout</a></li>
    </ul>
  </nav>

  <main>
    <h2>Attendance Table (TP3)</h2>

    <div style="max-width:1200px;margin:0 auto;">
      <div style="display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:12px;flex-wrap:wrap;">
        <div style="display:flex;gap:8px;align-items:center;">
          <button id="seedBtn" class="btn outline">Seed demo students</button>
          <button id="clearAll" class="btn warn">Clear all</button>
          <button id="showReport" class="btn">Show Report</button>
          <button id="highlightExcellent" class="btn outline">Highlight Excellent Students</button>
          <button id="resetColors" class="btn outline">Reset Colors</button>
        </div>
        <div class="small-muted">Click P / Pa checkboxes to toggle values; changes save automatically.</div>
      </div>

      <div class="table-wrap">
        <table id="attendanceTable" class="table">
          <thead>
            <tr>
              <th rowspan="2">Last Name</th>
              <th rowspan="2">First Name</th>
              <!-- Session headers: each session has two columns (P and Pa) -->
              <th colspan="2">S1</th>
              <th colspan="2">S2</th>
              <th colspan="2">S3</th>
              <th colspan="2">S4</th>
              <th colspan="2">S5</th>
              <th colspan="2">S6</th>

              <th rowspan="2">Absences</th>
              <th rowspan="2">Participation</th>
              <th rowspan="2">Message</th>
            </tr>
            <tr>
              <!-- subheaders for P and Pa -->
              <th>P</th><th>Pa</th>
              <th>P</th><th>Pa</th>
              <th>P</th><th>Pa</th>
              <th>P</th><th>Pa</th>
              <th>P</th><th>Pa</th>
              <th>P</th><th>Pa</th>
            </tr>
          </thead>

          <tbody id="attendanceBody">
            <!-- rows rendered by script.js -->
          </tbody>
        </table>
      </div>

      <!-- Report area (hidden by default) -->
      <section id="reportSection" class="card" style="margin-top:18px; display:none;">
        <h3>Attendance Report</h3>
        <div style="display:flex;gap:18px;align-items:center;flex-wrap:wrap;">
          <div class="card small" style="min-width:180px;">
            <h3 id="reportTotal">0</h3>
            <p>Total Students</p>
          </div>
          <div class="card small" style="min-width:180px;">
            <h3 id="reportPresent">0</h3>
            <p>Students Marked Present</p>
          </div>
          <div class="card small" style="min-width:180px;">
            <h3 id="reportParticipated">0</h3>
            <p>Students Marked Participated</p>
          </div>
        </div>

        <div style="margin-top:14px;">
          <canvas id="reportChart" width="600" height="200"></canvas>
        </div>
      </section>
    </div>
  </main>

  <!-- jQuery CDN (for exercises 5 & 6) and Chart.js CDN (for chart) -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"
    integrity="sha256-3gJwYp6Yp0yVYh3o6f2gqvT+3p2Q0sKcX2bYx4yZ0JE=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="script.js"></script>
</body>
</html>
